import{StyleSheet as t,View as e,FlatList as n,Text as o,TouchableOpacity as r,Modal as i,Pressable as l}from"react-native";import a,{useState as u,useEffect as h}from"react";var m=t.create({modalContainer:{width:"100%",flex:1,justifyContent:"center",alignItems:"center",zIndex:5},containerStyle:{width:"90%",backgroundColor:"#fff",borderRadius:15,overflow:"hidden"},ConfirmButtonStyle:{paddingVertical:10,paddingHorizontal:20,alignItems:"center",justifyContent:"center",backgroundColor:"#000",borderRadius:10,top:20},buttonTextStyle:{fontSize:16,color:"#fff"},innerContainer:{flex:1,flexDirection:"row",justifyContent:"center"},highlighter:{height:50,top:100,width:"100%",backgroundColor:"rgba(0,0,0,0.1)",position:"absolute",zIndex:-1},itemContainer:{height:50,justifyContent:"center",alignItems:"center",width:"100%"},itemText:{fontSize:16,color:"#000"},listContainer:{paddingBottom:100,paddingTop:100},absolutePressItem:{position:"absolute",height:"100%",width:"100%"}});function d(t){for(var e=t.month,n=t.year,o=new Date(n,e,1),r=[];o.getMonth()===e;)r.push(o.getDate()),o.setDate(o.getDate()+1);return r}var c=function(t){var r=t.data,i=t.onScrollToIndex;t.yScrollOffset;var l=t.value,u=t.highlightedItem,h=t.itemTextStyle,d=t.itemContainerStyle,c=t.highlightedItemStyle;return a.createElement(e,{style:{flex:1}},a.createElement(n,{onScroll:function(t){var e=t.nativeEvent.contentOffset.y;i(Math.round(e/50))},initialScrollIndex:null==r?void 0:r.findIndex((function(t){return t===l})),data:r,contentContainerStyle:m.listContainer,keyExtractor:function(t){return t.toString()},renderItem:function(t){var n=t.item;return a.createElement(e,{style:[m.itemContainer,d,{height:50}]},a.createElement(o,{style:[m.itemText,h,u==n&&(c||{fontSize:20,fontWeight:"500"})]},"number"==typeof n&&n<10?"0"+n:n))},getItemLayout:function(t,e){return{length:50,offset:50*e,index:e}},showsVerticalScrollIndicator:!1,snapToInterval:50,decelerationRate:"fast"}))},g=function(t){var n=t.highlighterStyle;return a.createElement(e,{style:[m.highlighter,n,{height:50}]})},f=function(t){var e=t.buttonText,n=t.buttonStyle,i=t.buttonTextStyle,l=t.onConfirm;return a.createElement(r,{onPress:l,style:[m.ConfirmButtonStyle,n],activeOpacity:.5},a.createElement(o,{style:[m.buttonTextStyle,i]},e))},s=[{id:0,month:"Jan"},{id:1,month:"Feb"},{id:2,month:"Mar"},{id:3,month:"Apr"},{id:4,month:"May"},{id:5,month:"Jun"},{id:6,month:"Jul"},{id:7,month:"Aug"},{id:8,month:"Sep"},{id:9,month:"Oct"},{id:10,month:"Nov"},{id:11,month:"Dec"}],y=function(t){var n,o=t.visible,r=void 0!==o&&o,y=t.animationType,v=void 0===y?"fade":y,S=t.transparent,b=void 0===S||S,x=t.onRequestClose,C=t.onBackgroundPress,p=t.defaultvalue,I=void 0===p?"".concat((new Date).getFullYear(),"-").concat((new Date).toLocaleString("en-US",{month:"short"}),"-").concat((new Date).getDate()):p,w=t.opacity,D=void 0===w?.5:w,T=t.containerStyle,E=t.modalContainer,M=t.wholeContainer,F=t.maxDate,N=void 0===F?(new Date).toISOString():F,Y=t.minDate,O=void 0===Y?"2000-01-01":Y,k=t.onConfirm,z=t.showDays,B=void 0===z||z,P=t.showMonth,R=void 0===P||P,j=t.highlighterStyle,J=t.itemContainerStyle,q=t.itemTextStyle,A=t.buttonStyle,L=t.buttonTextStyle,V=t.buttonText,H=void 0===V?"Confirm":V,U=t.highlightedItemStyle,W=new Date(N),G=new Date(O),K=null==I?void 0:I.split("-"),Q=function(t){for(var e=t.minDate,n=t.maxDate,o=new Date(e).getFullYear(),r=new Date(n).getFullYear(),i=[],l=o;l<=r;l++)i.push(l);return i}({maxDate:N,minDate:O}),X=u((function(){var t=Number(K[0]),e=Q.indexOf(t);return-1!==e?e:Q.length-1})),Z=X[0],$=X[1];function _(){return W.getFullYear()==G.getFullYear()?s.slice(G.getMonth(),W.getMonth()+1):W.getFullYear()==Q[Z]?s.slice(0,W.getMonth()+1):G.getFullYear()==Q[Z]?s.slice(G.getMonth()):s}function tt(t){return W.getFullYear()===G.getFullYear()?s.slice(G.getMonth(),W.getMonth()+1):t===W.getFullYear()?s.slice(0,W.getMonth()+1):t===G.getFullYear()?s.slice(G.getMonth()):s}var et=u((function(){var t=Number(K[0]),e=K[1],n=tt(t),o=n.findIndex((function(t){return t.month===e}));return-1!==o?o:n.length-1})),nt=et[0],ot=et[1],rt=_()[nt],it=d({month:null!==(n=null==rt?void 0:rt.id)&&void 0!==n?n:1,year:Q[Z]});var lt=function(){var t=_()[nt];if(!t)return[];var e=Q[Z],n=t.id;return e===W.getFullYear()&&n===W.getMonth()+1?it.slice(0,W.getDate()):e===G.getFullYear()&&n===G.getMonth()+1?it.slice(G.getDate()-1):it}(),at=u((function(){var t,e=Number(K[2]),n=tt(Number(K[0])).find((function(t){return t.month===K[1]})),o=d({month:null!==(t=null==n?void 0:n.id)&&void 0!==t?t:1,year:Number(K[0])});return Math.min(e-1,o.length-1)})),ut=at[0],ht=at[1];if(isNaN(W.getTime())||isNaN(G.getTime()))throw new Error("Date must be a valid date type");if(W<G)throw new Error("Max date must be greater than Min date");if("number"!=typeof D)throw new Error("Opacity must be of type number");var mt=_().map((function(t){return t.month}));return h((function(){0==r&&function(){var t,e,n=K[0],o=K[1],r=K[2],i=Number(n),l=Number(r),a=Q.indexOf(i);$(-1!==a?a:Q.length-1);var u=tt(i),h=u.findIndex((function(t){return t.month===o}));ot(-1!==h?h:0);var m=null!==(t=u[h])&&void 0!==t?t:u[0],c=d({month:null!==(e=null==m?void 0:m.id)&&void 0!==e?e:1,year:i});ht(Math.min(l-1,c.length-1))}()}),[r]),h((function(){ut>=lt.length&&ht(lt.length-1)}),[nt,Z]),a.createElement(i,{visible:r,animationType:v,transparent:b,statusBarTranslucent:!0,onRequestClose:x},a.createElement(e,{style:M},a.createElement(e,{style:[m.modalContainer,E]},a.createElement(e,{style:[m.containerStyle,T,{height:250}]},a.createElement(e,{style:m.innerContainer},1==B&&a.createElement(c,{data:lt,value:Number(K[2]),onScrollToIndex:ht,highlightedItem:lt[ut],yScrollOffset:lt.length?50*(lt.length-1):0,itemContainerStyle:J,itemTextStyle:q,highlightedItemStyle:U}),R&&a.createElement(c,{data:mt,value:K[1].trim(),onScrollToIndex:function(t){ot(t)},highlightedItem:mt[nt],yScrollOffset:50*((null==mt?void 0:mt.length)-1),itemContainerStyle:J,itemTextStyle:q,highlightedItemStyle:U}),a.createElement(c,{data:Q,onScrollToIndex:$,value:Number(K[0]),highlightedItem:Q[Z],yScrollOffset:50*((null==Q?void 0:Q.length)-1),itemContainerStyle:J,itemTextStyle:q,highlightedItemStyle:U}),a.createElement(g,{highlighterStyle:j}))),a.createElement(f,{buttonStyle:A,buttonTextStyle:L,buttonText:H,onConfirm:function(){var t;k(function(t){var e=t.year,n=t.month,o=t.day;return(void 0!==o?new Date(e,n,o):new Date(e,n,1)).toISOString()}({year:Q[Z],month:null!==(t=_()[nt].id)&&void 0!==t?t:1,day:0==B?void 0:lt[ut]}))}}))),a.createElement(l,{onPress:C,style:[m.absolutePressItem,{backgroundColor:"rgba(0,0,0, ".concat(D>100?1:D<0?0:D,")")}]}))};export{y as default};
//# sourceMappingURL=index.mjs.map
